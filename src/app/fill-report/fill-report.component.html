<form dir="rtl" class="form col" id="formBody" [formGroup]="ReportGroup" *ngIf="visible">
    <div class="modal-header text-right">
        <div class="row mt-3">
            <div class="col-4">
                {{date2}} - {{time2}} - {{userFullName}}
            </div>
            <div class="col-3">
                <span style="font-size: 20px;"
                    *ngIf="reportType == 'clinical'">{{ReportGroup.controls['PatientName'].value}}</span><br> <span
                    *ngIf="reportType == 'clinical'">{{ReportGroup.controls['PatientNurseStatus'].value}}</span>
            </div>
            <div class="col-5">
                <button matTooltip="שליחה לנמען" mat-raised-button type="button" id="BtnStyle"
                    class="btn btn-primary btn-raised float-left" (click)="openShareDialog()">
                    <span class="material-icons">
                        reply
                    </span>
                </button>
                <button matTooltip="שמירה" class="btn btn-primary btn-raised ml-3 float-left" id="BtnStyle"
                    (click)="onSubmit()" type="submit" mat-raised-button>
                    <span class="material-icons">
                        save
                    </span>
                </button>
                <button matTooltip="הוספת תגובה" type="button" id="BtnStyle" mat-raised-button
                    class="btn btn-primary btn-raised ml-3 float-left" (click)="addResponseToReport(reportID)">
                    <span class="material-icons">
                        add
                    </span>
                </button>
                <button *ngIf="reportID != '0'" matTooltip="מחיקה" type="button" id="BtnStyle" mat-raised-button
                    class="btn btn-outline-dark ml-3 float-left" color="warn" (click)="deleteReport(reportID)">
                    <span class="material-icons">
                        delete
                    </span>
                </button>
            </div>
        </div>
    </div>
    <div class="modal-body">
        <div class="row" *ngIf="reportType == 'clinical'">
            <div class="col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>אבחנה</mat-label>
                    <textarea matInput style="font-family: 'math';font-weight: bolder;font-size: 18px;" formControlName="Diagnosis"
                        placeholder="אבחנה"></textarea>
                </mat-form-field>
            </div>
        </div>
        <div class="row" *ngIf="reportType == 'administrative'">
            <div class="col">
                <div class="form-group">
                    <mat-form-field>
                        <mat-label>נושא/מחלקה</mat-label>
                        <input type="text" aria-label="department" style="font-family: 'math';font-weight: bolder;font-size: 18px;" matInput
                            [formControl]="departmentfilter" [matAutocomplete]="auto2">
                        <mat-autocomplete #auto2="matAutocomplete">
                            <mat-option *ngFor="let dept of filteredOptions2 | async" [value]="dept.Dept_Name"
                                style="font-family: 'math';font-weight: bolder;font-size: 18px;">
                                {{dept.Dept_Name}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
            </div>
            <div class="col">
                <div class="form-group">
                    <mat-form-field>
                        <mat-label>קטגוריה</mat-label>
                        <input type="text" aria-label="category" style="font-family: 'math';font-weight: bolder;font-size: 18px;" matInput
                            [formControl]="categoryfilter" [matAutocomplete]="auto3">
                        <mat-autocomplete #auto3="matAutocomplete">
                            <mat-option *ngFor="let cat of filteredOptions3 | async" [value]="cat.Cat_Name"
                                style="font-family: 'math';font-weight: bolder;font-size: 18px;">
                                {{cat.Cat_Name}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
            </div>
            <div class="col">
                <div class="form-group">
                    <mat-form-field>
                        <mat-label>תת קטגוריה</mat-label>
                        <input type="text" aria-label="subcategory" style="font-family: 'math';font-weight: bolder;font-size: 18px;" matInput
                            [formControl]="subcategoryfilter" [matAutocomplete]="auto4">
                        <mat-autocomplete #auto4="matAutocomplete">
                            <mat-option *ngFor="let subcat of filteredOptions4 | async" [value]="subcat.SubCat_Name"
                                style="font-family: 'math';font-weight: bolder;font-size: 18px;">
                                {{subcat.SubCat_Name}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
            </div>
            <div class="col">
                <div class="form-group">
                    <mat-form-field>
                        <mat-label>סטטוס</mat-label>
                        <mat-select formControlName="ReportStatus" style="font-family: 'math';font-weight: bolder;font-size: 18px;">
                            <mat-option *ngFor="let st of status" [value]="st.value" style="font-family: 'math';font-weight: bolder;font-size: 18px;">
                                {{st.viewValue}} </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
            <div class="col" style="align-self: center;">
                <section class="example-section">
                    <mat-checkbox class="example-margin" formControlName="toContinue"
                        (change)="autoDate($event.checked)" style="font-family: 'math';font-weight: bolder;font-size: 18px;">דורש
                        המשך טיפול</mat-checkbox>
                </section>
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <div class="form-group">
                    <mat-form-field>
                        <mat-label>משמרת</mat-label>
                        <b style="font-size: 26px;font-family: 'math';font-weight: bolder;font-size: 18px;">
                            <input matInput class="form-control" formControlName="ReportShift" type="text" />
                        </b>
                    </mat-form-field>

                </div>
            </div>
            <div class="col-9">
                <div class="form-group">
                    <mat-form-field>
                        <textarea matInput rows="3" style="font-size: 15px;font-family: 'math';font-weight: bolder;font-size: 18px;" placeholder="תוכן הדוח"
                            class="form-control border-1" formControlName="ReportText"></textarea>
                    </mat-form-field>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-11">
                <h5>תגובות:</h5>
                <div class="expantionBox" *ngIf="usersReponsesList?.length > 0">
                    <div class="mat-accordion">
                        <div *ngFor="let response of usersReponsesList">
                            <div class="reply-row" *ngIf="response.FirstName != ''">
                                <div class="row mt-2">
                                    <div class="col-10">
                                        <h6>
                                            {{response.FirstName}} {{response.LastName}} &nbsp;{{response.UpdateDate}}
                                        </h6>
                                    </div>
                                    <div class="col-2">
                                        <button *ngIf="response.UserName == UserName" matTooltip="מחיקה" type="button"
                                            id="BtnStyle" mat-raised-button class="btn btn-outline-dark" color="warn"
                                            (click)="deleteReply(response.ResponseRowID)">
                                            <span class="material-icons">
                                                delete
                                            </span>
                                        </button>
                                    </div>
                                </div>
                                <br>
                                <p class="text-right" style="font-family: 'math';font-weight: bolder;font-size: 18px;">{{response.ResponseText}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-1">
                <!-- <button mat-mini-fab matTooltip="הוספת תגובה" id="addReply" (click)="addResponseToReport(reportID)"
                    color="primary">
                    <mat-icon>add</mat-icon>
                </button> -->
            </div>
        </div>
    </div>
    <!-- <div class="modal-footer text-left" *ngIf="creator || reportID == '0';else note">
        <button matTooltip="שמירה" class="btn btn-outline-dark ml-4" id="BtnStyle" color="primary" (click)="onSubmit()"
            type="submit" mat-raised-button>
            <span class="material-icons">
                save
            </span>
        </button>
        <button *ngIf="reportID != '0'" matTooltip="מחיקה" type="button" id="BtnStyle" mat-raised-button
            class="btn btn-outline-dark" color="warn" (click)="deleteReport(reportID)">
            <span class="material-icons">
                delete
            </span>
        </button>
    </div> -->
    <ng-template #note>הדווח נעול לעריכה</ng-template>
</form>