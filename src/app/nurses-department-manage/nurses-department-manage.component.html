<button type="button" class="close" matTooltip="סגירה" aria-label="Close" (click)="closeModal()">
  <span aria-hidden="true">&times;</span>
</button>
<form class="form" [formGroup]="departmentRelease">

  <div class="card text-center" id="table-overflow">
    <h4><b>{{Dept_Name}}</b> {{myDate | date: "dd.MM.yyyy"}}</h4>

    <table dir="rtl" mat-table [dataSource]="dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="nursing">
        <th mat-header-cell *matHeaderCellDef> תפוסה סיעודית </th>
        <td mat-cell *matCellDef="let element"> {{element.NursingCount}} </td>
      </ng-container>
      <!-- <ng-container matColumnDef="medical">
        <th mat-header-cell *matHeaderCellDef> תפוסה רפואית </th>
        <td mat-cell *matCellDef="let element"> {{element.MedicCount}} </td>
      </ng-container> -->
      <ng-container matColumnDef="receipts">
        <th mat-header-cell *matHeaderCellDef> קבלות </th>
        <td mat-cell *matCellDef="let element"> {{element.RecieptCount}} </td>
      </ng-container>
      <ng-container matColumnDef="released">
        <th mat-header-cell *matHeaderCellDef> שחרורים </th>
        <td mat-cell *matCellDef="let element"> {{element.ReleasedCount}} </td>
      </ng-container>
      <ng-container matColumnDef="plannedtorelease">
        <th mat-header-cell *matHeaderCellDef> מתוכננים להשתחרר בערב </th>
        <td mat-cell *matCellDef="let element">
          <div class="row">
            <div class="col-9">
              <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>מספר מטופלים</mat-label>
                <input matInput type="number" formControlName="plannedToRelease">
              </mat-form-field>
            </div>
            <div class="col-3">
              <button type="button" class="mt-2" mat-mini-fab color="primary" matTooltip="שמירה"
                (click)="getSubmitPlannedToRealse('1')">
                <i class="material-icons">save</i>
              </button>
            </div>
          </div>

        </td>
      </ng-container>
      <ng-container matColumnDef="holiday">
        <th mat-header-cell *matHeaderCellDef> בחופשה </th>
        <td mat-cell *matCellDef="let element"> {{element.HolidayCount}} </td>
      </ng-container>
      <ng-container matColumnDef="respirators">
        <th mat-header-cell *matHeaderCellDef> מונשמים </th>
        <td mat-cell *matCellDef="let element"> {{element.RespiratorsCount}} </td>
      </ng-container>
      <ng-container matColumnDef="catheter">
        <th mat-header-cell *matHeaderCellDef> צנתר שתן </th>
        <td mat-cell *matCellDef="let element"> {{element.CatheterCount}} </td>
      </ng-container>
      <ng-container matColumnDef="centralcatheter">
        <th mat-header-cell *matHeaderCellDef> צנתר מרכזי </th>
        <td mat-cell *matCellDef="let element"> {{element.CentralCatheterCount}} </td>
      </ng-container>
      <ng-container matColumnDef="isolation">
        <th mat-header-cell *matHeaderCellDef> בידוד </th>
        <td mat-cell *matCellDef="let element"> {{element.IsolationCount}} </td>
      </ng-container>
      <ng-container matColumnDef="phlimitation">
        <th mat-header-cell *matHeaderCellDef> הגבלה פיזית </th>
        <td mat-cell *matCellDef="let element"> {{element.PhLimitationCount}} </td>
      </ng-container>
      <ng-container matColumnDef="death">
        <th mat-header-cell *matHeaderCellDef> פטירה </th>
        <td mat-cell *matCellDef="let element"> {{element.DeathCount}} </td>
      </ng-container>
      <ng-container matColumnDef="kpc">
        <th mat-header-cell *matHeaderCellDef> CPE </th>
        <td mat-cell *matCellDef="let element"> {{element.KpcCount}} </td>
      </ng-container>
      <ng-container matColumnDef="complex">
        <th mat-header-cell *matHeaderCellDef> מורכב </th>
        <td mat-cell *matCellDef="let element"> {{element.ComplexCount}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <div class="row p-3">
      <div class="col">
        <button matTooltip="דווח עבור מחלקת {{Dept_Name}}" type="button" id="EventBtn" mat-fab color="primary"
          (click)="fillReportDialog(0,Dept_Name,'','','')">
          <i class="material-icons">assignment</i>
        </button>
      </div>
      <div class="col">
        <button type="button" id="details-btn" *ngIf="Dept_Name == 'פנימית א'"
          (click)="getPatientsPerDepart($event,'רנורול')" mat-raised-button color="primary">
          נוירולוגיה
      </button>
      </div>
      <div class="col">
        <button type="button" id="details-btn" *ngIf="Dept_Name == 'פנימית א'"
          (click)="getPatientsPerDepart($event,'רשבצ-מ')" mat-raised-button color="primary">
          שבץ מוחי
      </button>
      </div>
      <div class="col">
        <button matTooltip="מטופלים במחלקת {{Dept_Name}}" type="button" id="EventBtn2" mat-fab color="primary"
          (click)="getPatientsPerDepart($event,'')">
          <i class="material-icons">arrow_circle_down</i>
        </button>
      </div>

    </div>
    <mat-progress-bar mode="buffer" *ngIf="Patientsloading"></mat-progress-bar>
    <h4 *ngIf="patientsTable">רשימת מטופלים במחלקת: <b>{{Dept_Name}}</b></h4>
    <div dir="rtl">
      <mat-form-field appearance="standard" *ngIf="patientsTable">
        <mat-label>סינון</mat-label>
        <input matInput (keyup)="applyFilter($event,'')" placeholder="הקלד..." #input>
      </mat-form-field>
    </div>
    <div dir="rtl" class="mb-3" *ngIf="patientsTable">
      <mat-list  role="list" id="list_of_types">
        <mat-list-item role="listitem"><button type="button" id="details-btn"
          (click)="applyFilter($event,'')" mat-raised-button color="primary">
          הכל
      </button></mat-list-item>
        <mat-list-item role="listitem"><button type="button" id="details-btn"
          (click)="applyFilter($event,'מונשם')" mat-raised-button color="primary">
          מונשמים
      </button></mat-list-item>
        <mat-list-item role="listitem"><button type="button" id="details-btn"
          (click)="applyFilter($event,'צנתר שתן')" mat-raised-button color="primary">
          צנתר שתן
      </button></mat-list-item>
        <mat-list-item role="listitem"><button type="button" id="details-btn"
          (click)="applyFilter($event,'צנתר מרכזי')" mat-raised-button color="primary">
          צנתר מרכזי
      </button></mat-list-item>
        <mat-list-item role="listitem"><button type="button" id="details-btn"
          (click)="applyFilter($event,'בידוד')" mat-raised-button color="primary">
          בידוד
      </button></mat-list-item>
        <mat-list-item role="listitem"><button type="button" id="details-btn"
          (click)="applyFilter($event,'הגבלה פיזית')" mat-raised-button color="primary">
          הגבלה פיזית
      </button></mat-list-item>
        <mat-list-item role="listitem"><button type="button" id="details-btn"
          (click)="applyFilter($event,'קורונה')" mat-raised-button color="primary">
          סטטוס קורונה
      </button></mat-list-item>
      </mat-list>
    </div>

    <table dir="rtl" mat-table [dataSource]="dataSource2" class="mat-elevation-z8" *ngIf="patientsTable">

      <ng-container matColumnDef="casenumber">
        <th mat-header-cell *matHeaderCellDef> מספר מקרה </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_CASE_NUMBER}} </td>
      </ng-container>

      <!-- <ng-container matColumnDef="departmentnursing">
        <th mat-header-cell *matHeaderCellDef> מחלקה סיעודית </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_MOVE_DEPART_SEODE}} </td>
      </ng-container> -->

      <ng-container matColumnDef="departmentmedical">
        <th mat-header-cell *matHeaderCellDef> מחלקה רפואית </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_MOVE_DEPART}} </td>
      </ng-container>

      <ng-container matColumnDef="firstname">
        <th mat-header-cell *matHeaderCellDef> שם פרטי </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_FIRST_NAME}} </td>
      </ng-container>

      <ng-container matColumnDef="dadname">
        <th mat-header-cell *matHeaderCellDef> שם אבא </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_FATHER_NAME}} </td>
      </ng-container>

      <ng-container matColumnDef="lastname">
        <th mat-header-cell *matHeaderCellDef> שם משפחה </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_LAST_NAME}} </td>
      </ng-container>

      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef> גיל </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_DOB}} </td>
      </ng-container>

      <ng-container matColumnDef="gender">
        <th mat-header-cell *matHeaderCellDef> מין </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_PATIENT_GENDER}} </td>
      </ng-container>

      <!-- <ng-container matColumnDef="city">
        <th mat-header-cell *matHeaderCellDef> כתובת מגורים </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_CITY}} </td>
      </ng-container> -->

      <ng-container matColumnDef="enterdate">
        <th mat-header-cell *matHeaderCellDef> תאריך קבלה </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_MOVE_DATE}} </td>
      </ng-container>

      <ng-container matColumnDef="entertime">
        <th mat-header-cell *matHeaderCellDef> שעת קבלה </th>
        <td mat-cell *matCellDef="let element"> {{element.PM_MOVE_TIME }} </td>
      </ng-container>

      <ng-container matColumnDef="reportpatint">
        <th mat-header-cell *matHeaderCellDef> דיווח</th>
        <td mat-cell *matCellDef="let element"> <button matTooltip="דווח עבוד מטופל" type="button" id="EventBtn2"
            mat-mini-fab color="primary"
            (click)="fillReportDialog(0,Dept_Name,element.PM_FIRST_NAME,element.PM_LAST_NAME,element.PM_CASE_NUMBER)">
            <span class="material-icons">
              assignment
            </span>
          </button> </td>
      </ng-container>

      <ng-container matColumnDef="displayreports">
        <th mat-header-cell *matHeaderCellDef> הצג דוחות</th>
        <td mat-cell *matCellDef="let element"> <button matTooltip="הצג את הדווחים" type="button" id="EventBtn2"
            mat-mini-fab color="primary"
            (click)="displayReports(element.PM_CASE_NUMBER,true,Dept_Name,element.PM_FIRST_NAME,element.PM_LAST_NAME)">
            <span class="material-icons">
              <span class="material-icons">
                menu_open
              </span>
            </span>
          </button> </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns2;" matTooltip="{{row.SSP_DESCRIPTION}}"></tr>

    </table>

  </div>
</form>



<mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>