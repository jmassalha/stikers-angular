<div id="page-toshow">
    <h1 class="text-center">ניתוחים</h1>
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <div dir="rtl" class="card w-85-p">
                    <div dir="rtl" class="card-body">
                        <form class="form" ngbAutofocus>
                            <div class="row">
                                <div class="col">
                                    <mat-form-field class="example-full-width" appearance="fill">
                                        <mat-label>שם מנתח</mat-label>
                                        <input type="text" placeholder="בחר מנתח" matInput [formControl]="myControl"
                                            [matAutocomplete]="auto" />
                                        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
                                            (optionSelected)="updateUser($event)">
                                            <mat-option *ngFor="
                                                    let option of filteredOptions | async
                                                " [value]="option.FullName">
                                                {{ option.FullName }}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div>

                                <div class="col">
                                    <div class="form-group">
                                        <mat-form-field>
                                            <input matInput autocomplete="off" placeholder="מ תאריך" required
                                                (focus)="startdate.open()" [(ngModel)]="startdateVal" name="startdate"
                                                [matDatepicker]="startdate" />
                                            <mat-datepicker-toggle matSuffix [for]="startdate"></mat-datepicker-toggle>
                                            <mat-datepicker #startdate></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <mat-form-field>
                                            <input matInput autocomplete="off" placeholder="עד תאריך "
                                                (focus)="enddate.open()" required [(ngModel)]="enddateVal"
                                                name="enddate" [matDatepicker]="enddate" />
                                            <mat-datepicker-toggle matSuffix [for]="enddate"></mat-datepicker-toggle>
                                            <mat-datepicker #enddate></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" [disabled]="TABLE_DATA.length == 0" class="btn   btn-link none-all btn-raised"
                                (click)="getReportExcel($event)">
                                <img src="assets/images/excel.png" />
                            </button>
                            <button mat-raised-button [disabled]="Staff == ''" type="submit" class="btn btn-primary btn-raised"
                                (click)="getGetSurgeries($event)">
                                חפש
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br />
    <hr />
    <div class="container-fluid pb-60">
        <div class="row">
            <div dir="rtl" class="col">
                <div class="table-responsive">
                    <div class="table-spinner-container">
                        <table class="table" mat-table [dataSource]="dataSource" id="formTable1">
                            <ng-container matColumnDef="CaseNumber">
                                <th mat-header-cell *matHeaderCellDef>
                                    מס' מקרה
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.CaseNumber }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="RequestDepart">
                                <th mat-header-cell *matHeaderCellDef>
                                    מחלקה מזמינה
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.RequestDepart }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="DepartDoing">
                                <th mat-header-cell *matHeaderCellDef>
                                    מחלקה מבצעת
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.DepartDoing }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="SurgeryRoom">
                                <th mat-header-cell *matHeaderCellDef>
                                    חדר ניתוח
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.SurgeryRoom }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="SurgeryDate">
                                <th mat-header-cell *matHeaderCellDef>
                                    תאריך ניתוח
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.SurgeryDate }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="SurgeryType">
                                <th mat-header-cell *matHeaderCellDef>
                                    סוג ניתוח
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.SurgeryType }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="SurgeryCode">
                                <th mat-header-cell *matHeaderCellDef>
                                    קוד ניתוח
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.SurgeryCode }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="SurgeryName">
                                <th mat-header-cell *matHeaderCellDef>
                                    שם ניתוח
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.SurgeryName }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="Primary">
                                <th mat-header-cell *matHeaderCellDef>
                                    ניתוח עיקרי
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.Primary }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="PatientNumber">
                                <th mat-header-cell *matHeaderCellDef>
                                    מס' מטופל
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.PatientNumber }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="SurgenName">
                                <th mat-header-cell *matHeaderCellDef>
                                    שם מנתח
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.SurgenName }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="Role">
                                <th mat-header-cell *matHeaderCellDef>
                                    תפקיד
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.Role }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="PatientDOB">
                                <th mat-header-cell *matHeaderCellDef>
                                    תאריך לידה
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.PatientDOB }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="PatientFirstName">
                                <th mat-header-cell *matHeaderCellDef>
                                    שם פרטי
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.PatientFirstName }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="PatientLastName">
                                <th mat-header-cell *matHeaderCellDef>
                                    שם משפחה
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.PatientLastName }}
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                        </table>
                    </div>
                    <!-- PAGINATION -->
                    <mat-paginator [length]="resultsLength" [pageSize]="20" showFirstLastButtons></mat-paginator>
                </div>
            </div>
        </div>
    </div>
</div>