<mat-card class="d-block full-width">

  <form dir="rtl" [formGroup]="caseNumberForm" autocomplete="off" *ngIf="CaseNumber == ''">
    <mat-card class="full-width d-block  text-center">
      <mat-form-field class="full-width">
        <input formControlName="CaseNumber" matInput placeholder="מספר מקרה">
      </mat-form-field>
      <button mat-raised-button type="submit" (click)="searchCaseNumber()" class="btn btn-primary btn-raised">
        חפש
      </button>
    </mat-card>
  </form>

  <form dir="rtl" [formGroup]="surveyForm" (ngSubmit)="onSubmit()" autocomplete="off" *ngIf="CaseNumber != ''">
    <h2 class="page-title text-center">מילוי שאלון</h2>
    <mat-card class="full-width text-center">
      <label>{{_formName}}</label>
    </mat-card>


    <div class="survey-options">
      <div class="poll-options">
        <div class="row">
          <h3 class="list-title m-5" style="float: right;">תחילת מילוי שאלות</h3>
          <hr>
        </div>
        <ol formArrayName="Answers" class="list-style">
          <li class="border-me" *ngFor="let questionCtrl of _questionArr; let i=index">
            <mat-card [formGroupName]="i" class="d-block full-width mb-3 rel">
              <span class="pos-me-right">{{i+1}}.&nbsp;&nbsp;</span>
              <div class="row">
                <div class="col-9 text-right">
                  <label>{{questionCtrl.QuestionValue}}</label>
                </div>
                <div class="col-3 text-center">
                </div>
                <div>
                  <div *ngIf="questionCtrl.QuestionType == 'RadioButton'">
                    <mat-radio-group class="example-radio-group" formControlName="answerContent">
                      <ul class="question-type">
                        <div *ngFor="let optionCtrl of _optionArr let j = index">
                          <div *ngIf="optionCtrl.QuestionIDFK == questionCtrl.QuestionID">
                            <mat-radio-button style="float: right;" value="{{optionCtrl.OptionValue}}">
                              {{optionCtrl.OptionValue}}</mat-radio-button>
                          </div>
                        </div>
                        <mat-error style="float: right;" *ngIf="questionCtrl.QuestionIsRequired == 'True'">שדה חובה!
                        </mat-error>
                      </ul>
                    </mat-radio-group>
                  </div>
                  <div *ngIf="questionCtrl.QuestionType == 'CheckBox'">
                    <mat-radio-group>
                      <ul class="question-type">
                        <div>
                          <div *ngFor="let optionCtrl of _optionArr let k = index">
                            <div *ngIf="optionCtrl.QuestionIDFK == questionCtrl.QuestionID">
                              <mat-checkbox class="example-margin" style="float: right;"
                                (change)="myModel($event,optionCtrl.OptionValue,questionCtrl.QuestionID)">
                                {{optionCtrl.OptionValue}}</mat-checkbox>
                            </div>
                          </div>
                        </div>
                        <mat-error style="float: right;" *ngIf="questionCtrl.QuestionIsRequired == 'True'">שדה חובה!
                        </mat-error>
                      </ul>
                    </mat-radio-group>
                  </div>
                  <div *ngIf="questionCtrl.QuestionType == 'Text'">
                    <mat-form-field class="full-width">
                      <input matInput formControlName="answerContent" type="text" placeholder="תשובה">
                    </mat-form-field>
                  </div>
                  <div *ngIf="questionCtrl.QuestionType == 'TextArea'">
                    <mat-form-field class="full-width">
                      <input matInput formControlName="answerContent" type="text" max="300" placeholder="תשובה">
                    </mat-form-field>
                  </div>
                  <div *ngIf="questionCtrl.QuestionType == 'Date'">
                    <mat-form-field appearance="fill">
                      <mat-label>אפשרות תאריך</mat-label>
                      <input matInput [max]="maxDate | date:'yyyy-MM-dd'" formControlName="answerContent"
                        [matDatepicker]="picker">
                      <mat-datepicker-toggle matSuffix [for]="picker">
                      </mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div *ngIf="questionCtrl.QuestionType == 'Email'">
                    <mat-form-field class="full-width">
                      <input formControlName="answerContent" matInput type="email" placeholder="אימייל">
                    </mat-form-field>
                  </div>
                  <div *ngIf="questionCtrl.QuestionType == 'Phone'">
                    <mat-form-field class="full-width">
                      <input formControlName="answerContent" matInput placeholder="מספר טלפון">
                    </mat-form-field>
                  </div>
                  <div *ngIf="questionCtrl.QuestionType == 'ID'">
                    <mat-form-field class="full-width">
                      <input formControlName="answerContent" matInput placeholder="תעודת זהות">
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </mat-card>
          </li>
        </ol>
      </div>
    </div>
    <div class="button-row">
      <button class="full-width mb-5" style="font-weight: bold;font-size: 20px;color: white;" color="primary"
        type="submit" mat-raised-button>
        <span>שליחת שאלון</span>
      </button>
    </div>
  </form>
  <!-- <div class="button-row">
    <button class="full-width mb-5" style="background-color: red;font-size: 20px;font-weight: bold;color: white;" (click)="cancelReturn()" type="submit" mat-raised-button>
      <span>ביטול וחזרה לרשימה</span>
    </button>
  </div> -->
</mat-card>